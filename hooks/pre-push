#!/bin/bash

# Pre-push hook to run tests before allowing push
# This hook is called by "git push" after it has checked the remote status,
# but before anything has been pushed.
#
# To install this hook, copy it to .git/hooks/pre-push and make it executable:
# cp hooks/pre-push .git/hooks/pre-push
# chmod +x .git/hooks/pre-push

echo "Running pre-push tests..."

# Run the test_all command
make test_all

# Check if the tests passed
if [ $? -ne 0 ]; then
    echo "❌ Tests failed! Push aborted."
    echo "Please fix the failing tests before pushing."
    exit 1
fi

echo "✅ All tests passed! Proceeding with push..."
exit 0